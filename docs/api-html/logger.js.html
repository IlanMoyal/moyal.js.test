<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>logger.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AreEqual.html">AreEqual</a></li><li><a href="AreNotEqual.html">AreNotEqual</a></li><li><a href="Assert.html">Assert</a></li><li><a href="AutoNumbering.html">AutoNumbering</a><ul class='methods'><li data-type='method'><a href="AutoNumbering.html#next">next</a></li></ul></li><li><a href="BrowserLogger.html">BrowserLogger</a><ul class='methods'><li data-type='method'><a href="BrowserLogger.html#error">error</a></li><li data-type='method'><a href="BrowserLogger.html#group">group</a></li><li data-type='method'><a href="BrowserLogger.html#groupCollapsed">groupCollapsed</a></li><li data-type='method'><a href="BrowserLogger.html#groupEnd">groupEnd</a></li><li data-type='method'><a href="BrowserLogger.html#info">info</a></li><li data-type='method'><a href="BrowserLogger.html#log">log</a></li><li data-type='method'><a href="BrowserLogger.html#warn">warn</a></li></ul></li><li><a href="IsDefined.html">IsDefined</a></li><li><a href="IsFalse.html">IsFalse</a></li><li><a href="IsNotNull.html">IsNotNull</a></li><li><a href="IsNull.html">IsNull</a></li><li><a href="IsTrue.html">IsTrue</a></li><li><a href="IsUndefined.html">IsUndefined</a></li><li><a href="LoggerBase.html">LoggerBase</a><ul class='methods'><li data-type='method'><a href="LoggerBase.html#error">error</a></li><li data-type='method'><a href="LoggerBase.html#group">group</a></li><li data-type='method'><a href="LoggerBase.html#groupCollapsed">groupCollapsed</a></li><li data-type='method'><a href="LoggerBase.html#groupEnd">groupEnd</a></li><li data-type='method'><a href="LoggerBase.html#info">info</a></li><li data-type='method'><a href="LoggerBase.html#isSupportedColor">isSupportedColor</a></li><li data-type='method'><a href="LoggerBase.html#log">log</a></li><li data-type='method'><a href="LoggerBase.html#normalizeColor">normalizeColor</a></li><li data-type='method'><a href="LoggerBase.html#warn">warn</a></li><li data-type='method'><a href="LoggerBase.html#.getDefaultLogger">getDefaultLogger</a></li><li data-type='method'><a href="LoggerBase.html#.isLogger">isLogger</a></li></ul></li><li><a href="MultiLevelAutoNumbering.html">MultiLevelAutoNumbering</a><ul class='methods'><li data-type='method'><a href="MultiLevelAutoNumbering.html#nest">nest</a></li><li data-type='method'><a href="MultiLevelAutoNumbering.html#next">next</a></li><li data-type='method'><a href="MultiLevelAutoNumbering.html#reset">reset</a></li><li data-type='method'><a href="MultiLevelAutoNumbering.html#unnest">unnest</a></li></ul></li><li><a href="NoThrows.html">NoThrows</a></li><li><a href="NodeLogger.html">NodeLogger</a><ul class='methods'><li data-type='method'><a href="NodeLogger.html#colorfy">colorfy</a></li></ul></li><li><a href="SequencesAreEqual.html">SequencesAreEqual</a><ul class='methods'><li data-type='method'><a href="SequencesAreEqual.html#runImpl">runImpl</a></li></ul></li><li><a href="SequentialText.html">SequentialText</a><ul class='methods'><li data-type='method'><a href="SequentialText.html#close">close</a></li><li data-type='method'><a href="SequentialText.html#next">next</a></li><li data-type='method'><a href="SequentialText.html#reset">reset</a></li></ul></li><li><a href="SimpleLogger.html">SimpleLogger</a><ul class='methods'><li data-type='method'><a href="SimpleLogger.html#colorfy">colorfy</a></li><li data-type='method'><a href="SimpleLogger.html#error">error</a></li><li data-type='method'><a href="SimpleLogger.html#group">group</a></li><li data-type='method'><a href="SimpleLogger.html#groupCollapsed">groupCollapsed</a></li><li data-type='method'><a href="SimpleLogger.html#groupEnd">groupEnd</a></li><li data-type='method'><a href="SimpleLogger.html#info">info</a></li><li data-type='method'><a href="SimpleLogger.html#log">log</a></li><li data-type='method'><a href="SimpleLogger.html#prefixMessage">prefixMessage</a></li><li data-type='method'><a href="SimpleLogger.html#warn">warn</a></li></ul></li><li><a href="Test.html">Test</a><ul class='methods'><li data-type='method'><a href="Test.html#.areEqual">areEqual</a></li><li data-type='method'><a href="Test.html#.areNotEqual">areNotEqual</a></li><li data-type='method'><a href="Test.html#.isDefined">isDefined</a></li><li data-type='method'><a href="Test.html#.isFalse">isFalse</a></li><li data-type='method'><a href="Test.html#.isNotNull">isNotNull</a></li><li data-type='method'><a href="Test.html#.isNull">isNull</a></li><li data-type='method'><a href="Test.html#.isTrue">isTrue</a></li><li data-type='method'><a href="Test.html#.isUndefined">isUndefined</a></li><li data-type='method'><a href="Test.html#.noThrows">noThrows</a></li><li data-type='method'><a href="Test.html#.sequencesAreEqual">sequencesAreEqual</a></li><li data-type='method'><a href="Test.html#.throws">throws</a></li></ul></li><li><a href="TestBase.html">TestBase</a><ul class='methods'><li data-type='method'><a href="TestBase.html#run">run</a></li><li data-type='method'><a href="TestBase.html#runImpl">runImpl</a></li><li data-type='method'><a href="TestBase.html#write">write</a></li></ul></li><li><a href="TestGroup.html">TestGroup</a><ul class='methods'><li data-type='method'><a href="TestGroup.html#add">add</a></li><li data-type='method'><a href="TestGroup.html#areEqual">areEqual</a></li><li data-type='method'><a href="TestGroup.html#areNotEqual">areNotEqual</a></li><li data-type='method'><a href="TestGroup.html#clear">clear</a></li><li data-type='method'><a href="TestGroup.html#groupClose">groupClose</a></li><li data-type='method'><a href="TestGroup.html#groupStart">groupStart</a></li><li data-type='method'><a href="TestGroup.html#isDefined">isDefined</a></li><li data-type='method'><a href="TestGroup.html#isFalse">isFalse</a></li><li data-type='method'><a href="TestGroup.html#isNotNull">isNotNull</a></li><li data-type='method'><a href="TestGroup.html#isNull">isNull</a></li><li data-type='method'><a href="TestGroup.html#isTrue">isTrue</a></li><li data-type='method'><a href="TestGroup.html#isUndefined">isUndefined</a></li><li data-type='method'><a href="TestGroup.html#noThrows">noThrows</a></li><li data-type='method'><a href="TestGroup.html#run">run</a></li><li data-type='method'><a href="TestGroup.html#runImpl">runImpl</a></li><li data-type='method'><a href="TestGroup.html#sequencesAreEqual">sequencesAreEqual</a></li><li data-type='method'><a href="TestGroup.html#throws">throws</a></li><li data-type='method'><a href="TestGroup.html#write">write</a></li></ul></li><li><a href="Throws.html">Throws</a></li><li><a href="ThrowsBase.html">ThrowsBase</a><ul class='methods'><li data-type='method'><a href="ThrowsBase.html#runImpl">runImpl</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#SequentialText.">SequentialText.</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">logger.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*!
 * File: src/logger.js
 */

/**
 * Base class for logger.
 * 
 * @abstract
 */
class LoggerBase {
    /** @type {LoggerBase} */
    static #_defaultLogger = null;

    /**
     * Detects the current environment and returns the appropriate console printer adapter.
     * @returns {LoggerBase}
     */
    static getDefaultLogger() {
        if (this.#_defaultLogger === null) {
            try {
                if ((typeof window !== "undefined" &amp;&amp; typeof window.document !== "undefined"/* Browser */)
                    ||
                    (typeof importScripts === "function" &amp;&amp; typeof self !== "undefined" /* Web worker */)) {
                    this.#_defaultLogger = new BrowserLogger();
                }
                else if (typeof process !== "undefined" &amp;&amp; process.versions?.node) {
                    this.#_defaultLogger = new NodeLogger();
                }
                else {
                    this.#_defaultLogger = new SimpleLogger();
                }
            } catch {
                this.#_defaultLogger = new SimpleLogger();
            }
        }
        return this.#_defaultLogger;
    }

    /**
     * Checks if obj is an instance of a subclass of LoggerBase.
     * @param {any} logger - Object to test.
     * @returns {boolean} True if obj is derived from LoggerBase.
     */
    static isLogger(logger) {
        return logger instanceof LoggerBase &amp;&amp; Object.getPrototypeOf(logger.constructor) === LoggerBase;
    }

    /**
     * Support only colors that supported on all systems.
     */
    #_supportedColors = new Set([
        "black", "red", "green", "yellow", "blue", "magenta", "cyan", "white", "gray",
        "lightred", "lightgreen", "lightyellow", "lightblue", "lightmagenta", "lightcyan", "lightgray"
    ]);

    /**
     * Returns true if the specified color is supported by the logger.
     * @param {string} color - The color.
     * @returns {boolean} - true if the specified color is supported by the logger; otherwise, flase.
     */
    isSupportedColor(color) {
        return this.#_supportedColors.has(color);
    }

    /**
     * Normalizes the specified color name, or return an empty string if it is not supported.
     * 
     * @param {string} color - The color.
     * @returns {string} - The normalized color.
     */
    normalizeColor(color) {
        return typeof color === "string" ? color.toLowerCase() : "";
    }

    /**
     * Logs a message.
     * @param {string} message - The message.
     * @param {string} [color] - The color to be used.
     * @param  {...any} args - Additional arguments.
     * @returns {this} - The current instance for chaining.
     * @abstract
     */
    log(message, color, ...args){ /* eslint-disable-line no-unused-vars */ }

     /**
     * Logs information message.
     * @param {string} message - The message.
     * @param {string} [color] - The color to be used.
     * @param  {...any} args - Additional arguments.
     * @returns {this} The current instance for chaining.
     * @abstract
     */
     info(message, color, ...args){ /* eslint-disable-line no-unused-vars */ }

     /**
     * Logs warning message.
     * @param {string} message - The message.
     * @param {string} [color] - The color to be used.
     * @param  {...any} args - Additional arguments.
     * @returns {this} The current instance for chaining.
     * @abstract
     */
     warn(message, color, ...args){ /* eslint-disable-line no-unused-vars */ }

     /**
     * Logs error message.
     * @param {string} message - The message.
     * @param {string} [color] - The color to be used.
     * @param  {...any} args - Additional arguments.
     * @returns {this} The current instance for chaining.
     * @abstract
     */
     error(message, color, ...args){ /* eslint-disable-line no-unused-vars */ }

     /**
     * Starts grouped output.
     * @param {string} label - The group label.
     * @param {string} [color] - The color to be used.
     * @returns {this} The current instance for chaining.
     * @abstract
     */
     group(label, color){ /* eslint-disable-line no-unused-vars */ }

     /**
     * Starts grouped output (collapsed by default).
     * @param {string} label - The group label.
     * @param {string} [color] - The color to be used.
     * @returns {this} The current instance for chaining.
     * @abstract
     */
     groupCollapsed(label, color){ /* eslint-disable-line no-unused-vars */ }

     /**
     * Ends group output.
     * @returns {this} The current instance for chaining.
     * @abstract
     */
     groupEnd(){}
}

/**
 * @class SimpleLogger
 * 
 * A basic implementation of simple logger.
 */
class SimpleLogger extends LoggerBase {
    #_level = 0;
    #_prefixSpace = "";
    
    #_incrementLevel() {
        this.#_level++; 
        this.#_prefixSpace = "  ".repeat(this.#_level); 
    }

    #_decrementLevel() {
        this.#_level--; 
        if(this.#_level &lt; 0)
            this.#_level = 0;
        this.#_prefixSpace = "  ".repeat(this.#_level); 
    }

    /**
     * Prefix the specified message with the necessary indentation.
     * @param {string} message - The message.
     * @returns {string} - The indented message.
     */
    prefixMessage(message) {
        return this.#_prefixSpace + message;
    }
    
    /**
     * Wrap the specified message with color codes.
     * @param {string} message - The message
     * @param {string} [color] - The color
     * @param {string} [defaultColor] - default color to be use if the specified color is not applicable.
     * @returns {string} The message surrounded with color codes.
     */
    colorfy(message, color, defaultColor) { /* eslint-disable-line no-unused-vars */ 
        return message;
    }

    /**
     * Logs a message.
     * @param {string} message - The message.
     * @param {string} [color] - The color to be used.
     * @param  {...any} args - Additional arguments.
     * @returns {this} The current instance for chaining.
     * @override
     */
    log (message, color, ...args) { 
        message ??= "";
        console.log(this.colorfy(this.prefixMessage(message), color, "white"), ...args);
        return this;
    }

     /**
     * Logs information message.
     * @param {string} message - The message.
     * @param {string} [color] - The color to be used.
     * @param  {...any} args - Additional arguments.
     * @returns {this} The current instance for chaining.
     * @override
     */
    info(message, color, ...args){ 
        message ??= "";
        console.info(this.colorfy(this.prefixMessage(message), color, "cyan"), ...args);
        return this;
    }

    /**
     * Logs warning message.
     * @param {string} message - The message.
     * @param {string} [color] - The color to be used.
     * @param  {...any} args - Additional arguments.
     * @returns {this} The current instance for chaining.
     * @override
     */
    warn(message, color, ...args){ 
        message ??= "";
        console.warn(this.colorfy(this.prefixMessage(message), color, "yellow"), ...args);
        return this;
    }

     /**
     * Logs error message.
     * @param {string} message - The message.
     * @param {string} [color] - The color to be used.
     * @param  {...any} args - Additional arguments.
     * @returns {this} The current instance for chaining.
     * @override
     */
    error(message, color, ...args) { 
        message ??= "";
        console.error(this.colorfy(this.prefixMessage(message), color, "red"), ...args);
        return this;
    }

    #_group_impl(label, color) {
        label ??= "";
        console.log(this.colorfy(this.prefixMessage(`▼ ${label}`), color, "gray"));
        this.#_incrementLevel();
    }
    
    /**
     * Starts grouped output.
     * @param {string} label - The group label.
     * @param {string} [color] - The color to be used.
     * @returns {this} The current instance for chaining.
     * @override
     */
    group(label, color){
        this.#_group_impl(label, color);
        return this;
    }

    /**
    * Starts grouped output (collapsed by default).
    * @param {string} label - The group label.
    * @param {string} [color] - The color to be used.
    * @returns {this} The current instance for chaining.
    * @override
    */
    groupCollapsed(label, color){
        this.#_group_impl(label, color);
        return this;
    }

    /**
    * Ends group output.
    * @returns {this} The current instance for chaining.
    * @override
    */
    groupEnd() { 
        this.#_decrementLevel(); 
        return this;
    }
}

/**
 * @class BrowserLogger
 * 
 * A simple implementation of browser console logger.
 */
class BrowserLogger extends LoggerBase {
    /**
     * Browser console implementation.
     */
    #_sanitizeColor(color) {
        color = this.normalizeColor(color);
        return this.isSupportedColor(color) ? color : undefined;
    }

    /**
     * Logs a message.
     * @param {string} message - The message.
     * @param {string} [color] - The color to be used.
     * @param  {...any} args - Additional arguments.
     * @returns {this} The current instance for chaining.
     * @override
     */
    log(message, color, ...args) {
        message ??= "";
         console.log(`%c${message}`, `color:${this.#_sanitizeColor(color) ?? "inherit"}`, ...args);
         return this;
    }

     /**
     * Logs information message.
     * @param {string} message - The message.
     * @param {string} [color] - The color to be used.
     * @param  {...any} args - Additional arguments.
     * @returns {this} The current instance for chaining.
     * @override
     */
    info(message, color, ...args) {
        message ??= "";
        console.info(`%c${message}`, `color:${this.#_sanitizeColor(color) ?? "blue"}`, ...args);
        return this;
    }

    /**
     * Logs warning message.
     * @param {string} message - The message.
     * @param {string} [color] - The color to be used.
     * @param  {...any} args - Additional arguments.
     * @returns {this} The current instance for chaining.
     * @override
     */
    warn(message, color, ...args) {
        message ??= "";
        console.warn(`%c${message}`, `color:${this.#_sanitizeColor(color) ?? "orange"}`, ...args);
        return this;
    }

     /**
     * Logs error message.
     * @param {string} message - The message.
     * @param {string} [color] - The color to be used.
     * @param  {...any} args - Additional arguments.
     * @returns {this} The current instance for chaining.
     * @override
     */
    error(message, color, ...args) {
        message ??= "";
        console.error(`%c${message}`, `color:${this.#_sanitizeColor(color) ?? "red"}`, ...args);
        return this;
    }

     /**
     * Starts grouped output.
     * @param {string} label - The group label.
     * @param {string} [color] - The color to be used.
     * @returns {this} The current instance for chaining.
     * @override
     */
    group(label, color) {
        console.group(`%c${label}`, `color:${this.#_sanitizeColor(color) ?? "inherit"}`);
        return this;
    }

    /**
    * Starts grouped output (collapsed by default).
    * @param {string} label - The group label.
    * @param {string} [color] - The color to be used.
    * @returns {this} The current instance for chaining.* 
    * @override
    */
    groupCollapsed(label, color) {
        console.groupCollapsed(`%c${label}`, `color:${this.#_sanitizeColor(color) ?? "inherit"}`);
        return this;
    }

    /**
    * Ends group output.
    * @returns {this} The current instance for chaining.
    * @override
    */
    groupEnd() {
        console.groupEnd();
        return this;
    }
}

/**
 * @class NodeLogger
 * 
 * A simple implementation of NodeJS Logger
 */
class NodeLogger extends SimpleLogger {
    /**
     * Converts color names to ANSI escape codes for Node.js
     */
    #_nodeColorize(color, message) {
        color = this.normalizeColor(color);
        const ansi = {
            black: "\x1b[30m", red: "\x1b[31m", green: "\x1b[32m", yellow: "\x1b[33m",
            blue: "\x1b[34m", magenta: "\x1b[35m", cyan: "\x1b[36m", white: "\x1b[37m",
            gray: "\x1b[90m", lightred: "\x1b[91m", lightgreen: "\x1b[92m",
            lightyellow: "\x1b[93m", lightblue: "\x1b[94m", lightmagenta: "\x1b[95m",
            lightcyan: "\x1b[96m", lightgray: "\x1b[97m"
        };
        return (ansi[color] ?? "") + message + "\x1b[0m";
    }

    /**
     * Wrap the specified message with color codes.
     * @param {string} message - The message
     * @param {string} [color] - The color
     * @param {string} [defaultColor] - default color to be use if the specified color is nnot aplicable.
     * @returns {string} The message sourounded with color codes.
     * @override
     */
    colorfy(message, color, defaultColor) {
        return this.#_nodeColorize(color?.toLowerCase() ?? defaultColor, message)
    }
}

// Bundle all loggers together (optional default export)
const MoyalTestLogger = {
    LoggerBase,
    SimpleLogger,
    BrowserLogger,
    NodeLogger
};

export default MoyalTestLogger;

export {
    LoggerBase,
    SimpleLogger,
    BrowserLogger,
    NodeLogger
};</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Fri May 02 2025 01:54:04 GMT+0300 (שעון ישראל (קיץ)) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
